<!DOCTYPE html>
<html>
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="referrer" content="no-referrer">
          <title>Dust's Blog</title>
        <meta charset="utf-8" />

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/muicss@0.9.41/dist/css/mui.min.css"
              integrity="sha256-oX1CoieDE574GYL7nKAFSFOt8BdQzeKvATYS4VqFqNw=" crossorigin="anonymous">
        <link href="/theme/css/main.css" rel="stylesheet">
        <link href="/theme/css/highlight.css" rel="stylesheet">


    <meta name="tags" content="rsync" />

</head>

<body id="index" class="home">
  <div id="container" class="mui-container">
        <header id="banner" class="body">
                <h1><a href="/">Dust's Blog <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li>
              <div class="index-cat"><a href="/">Index</a></div>
            </li>
              <li class="active">
                <div  class="last-cat" >
                  <a href="/category/tech.html">Tech</a>
                </div>
              </li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="/windows-rsync-backup.html" rel="bookmark">在 Windows 中使用 rsync 备份文件</a></h2>
 
  </header>
<footer class="post-info">
    <div class="category-info">
        📁 <a href="/category/tech.html">Tech</a>
    </div>
    <p class="tag-info">
 📌             <a href="/tag/rsync.html">rsync</a>    </p>
    <time class="published" datetime="2021-01-24T11:11:00+08:00">
      🖊️ 2021-01-24 11:11:00
    </time>
  </footer><!-- /.post-info -->  <div class="entry-content">
    <p>笔记本使用的是固态硬盘，有掉盘风险，尽管已用 OneDrive 备份了重要文件，但仍有很多文件属于“虽然没那么重要，但如果丢失了也很心痛”的情况。于是决定使用移动固态硬盘做冷备份。</p>
<p>在 Windows 中，rsync 可通过 Cygwin 安装。</p>
<p>执行以下命令可进行测试备份：</p>
<div class="highlight"><pre><span></span><code><span class="err">rsync -gloptrn --delete $srcdir $dstdir</span>
</code></pre></div>

<p>参数解析：</p>
<div class="highlight"><pre><span></span><code><span class="err">g - 保留所属组信息</span>
<span class="err">l - 保留软链接</span>
<span class="err">o - 保留所属人信息</span>
<span class="err">p - 保留权限信息</span>
<span class="err">t - 保留修改时间</span>
<span class="err">r - 递归子目录</span>
<span class="err">n - 测试执行，不进行实际文件复制操作</span>
<span class="err">delete - 删除目标目录（$dstdir）下无关的文件</span>
</code></pre></div>

<p>建议开始时先使用文件数较少的目录进行测试，确认无误后，删除参数 n 即可执行实际备份操作。</p>
<p>经测试，部分文件可能会读取失败，不过这些文件不算问题（比如一些系统文件，以及 OneDrive 已经备份在云端但是未下载到本地的文件)。</p>
<p>首次备份总计 70G 的文件用时不超过 10 分钟，之后再执行备份同步用时不超过 30 秒，是可接受的速度。</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body mui--divider-top">
          <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">
            <img id="cc" src="/images/cc.80x15.png" alt="CC BY-SA"></a>
                <address id="about" class="vcard body">
                Powered by <a href="https://github.com/getpelican/pelican">Pelican</a>.
                Theme <a href="/">Autism</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
  </div>

  <script defer src="/theme/js/image.js"></script>
</body>
</html>